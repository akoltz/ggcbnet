@using Microsoft.Owin.Security
@using Microsoft.AspNet.Identity;

@{
    var bnetProvider = Context.GetOwinContext().Authentication.GetExternalAuthenticationTypes().Single(p => p.AuthenticationType.Equals(GGCharityWebRole.OAuth.BattleNetAuthenticationOptions.AuthenticationTypeString));

    using (Html.BeginForm("LinkLogin", "Account", new { ReturnUrl = ViewBag.ReturnUrl }))
    {
        @Html.AntiForgeryToken()
        <button type="submit" class="btn btn-default" id="@bnetProvider.AuthenticationType" name="provider" value="@bnetProvider.AuthenticationType" title="Log in using your @bnetProvider.Caption account">@bnetProvider.AuthenticationType</button>
    }
}